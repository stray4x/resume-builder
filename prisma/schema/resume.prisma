model ResumeTemplate {
    id          String   @id @default(cuid())
    name        String
    displayName String
    createdAt   DateTime @default(now())
    updatedAt   DateTime @updatedAt
    resume      Resume[]

    @@unique([name])
    @@index([name])
}

model Resume {
    id         String   @id @default(cuid())
    templateId String
    ownerId    String
    resumeName String
    themeColor String
    jobTitle   String
    firstName  String
    lastName   String
    email      String
    phone      String
    country    String
    city       String
    summary    String
    createdAt  DateTime @default(now())
    updatedAt  DateTime @updatedAt

    template       ResumeTemplate   @relation(fields: [templateId], references: [id])
    owner          User             @relation(fields: [ownerId], references: [id], onDelete: Cascade)
    workExperience WorkExperience[]
    education      Education[]
    projects       Project[]
    links          Link[]
    skills         Skill[]
    languages      Language[]
    courses        Course[]
}

model WorkExperience {
    id               String    @id @default(cuid())
    resumeId         String
    jobTitle         String
    employer         String
    city             String
    startDate        DateTime?
    endDate          DateTime?
    endDateIsCurrent Boolean   @default(false)
    description      String    @db.Text
    sortOrder        BigInt

    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt

    resume Resume @relation(fields: [resumeId], references: [id], onDelete: Cascade)

    @@index([resumeId, sortOrder])
}

model Education {
    id               String    @id @default(cuid())
    resumeId         String
    school           String
    degree           String
    city             String
    startDate        DateTime?
    endDate          DateTime?
    endDateIsCurrent Boolean   @default(false)
    description      String    @db.Text
    sortOrder        BigInt

    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt

    resume Resume @relation(fields: [resumeId], references: [id], onDelete: Cascade)

    @@index([resumeId, sortOrder])
}

model Project {
    id          String @id @default(cuid())
    resumeId    String
    title       String
    url         String
    repoUrl     String
    description String @db.Text
    sortOrder   BigInt

    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt

    resume Resume @relation(fields: [resumeId], references: [id], onDelete: Cascade)

    @@index([resumeId, sortOrder])
}

model Link {
    id        String @id @default(cuid())
    resumeId  String
    title     String
    url       String
    sortOrder BigInt

    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt

    resume Resume @relation(fields: [resumeId], references: [id], onDelete: Cascade)

    @@index([resumeId, sortOrder])
}

enum SkillLevel {
    Novice
    Apprentice
    Adept
    Expert
    Master
    Legendary
}

model Skill {
    id        String     @id @default(cuid())
    resumeId  String
    title     String
    level     SkillLevel
    sortOrder BigInt

    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt

    resume Resume @relation(fields: [resumeId], references: [id], onDelete: Cascade)

    @@index([resumeId, sortOrder])
}

enum LanguageLevel {
    A1
    A2
    B1
    B2
    C1
    C2
}

model Language {
    id        String        @id @default(cuid())
    resumeId  String
    language  String
    level     LanguageLevel
    sortOrder BigInt

    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt

    resume Resume @relation(fields: [resumeId], references: [id], onDelete: Cascade)

    @@index([resumeId, sortOrder])
}

model Course {
    id               String    @id @default(cuid())
    resumeId         String
    title            String
    institution      String
    startDate        DateTime?
    endDate          DateTime?
    endDateIsCurrent Boolean   @default(false)
    sortOrder        BigInt

    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt

    resume Resume @relation(fields: [resumeId], references: [id], onDelete: Cascade)

    @@index([resumeId, sortOrder])
}
